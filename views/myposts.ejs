<%- include('layouts/header') -%>
<body>
    <%- include('layouts/navbar') -%>
    <!-- Page Header -->
    <header class="masthead" style="background-image: url('/assets/img/contact-bg.jpg')">
        <div class="container position-relative px-4 px-lg-5">
            <div class="row gx-4 gx-lg-5 justify-content-center">
                <div class="col-md-10 col-lg-8 col-xl-7">
                    <div class="page-heading">
                        <h1>My Post</h1>
                        <span class="subheading">View all my posts.</span>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- Main Content -->
    <main class="mb-4">
        <div class="container px-4 px-lg-5">
            <div class="row gx-4 gx-lg-5 justify-content-center">
                <% if(blogposts && blogposts.length > 0) { %>
                    <% blogposts.forEach(function(post) { %>
                        <div class="col-md-3 col-lg-4 col-xl-4">
                            <div class="post-preview my-3">
                                <img src="/assets<%= post.image %>" width="100%" height="260px" style="object-fit: cover;" alt="">
                                <a href="/post/<%= post._id %>">
                                    <h2 class="post-title"><%= post.title %></h2>
                                    <h3 class="post-subtitle"><%= post.body %></h3>
                                </a>
                                <p class="post-meta">
                                    Posted by
                                    <a href="#"><%= post.userid.username %></a>
                                    on <%= post.datePosted.toLocaleDateString() %>
                                </p>
                                <a href="/posts/edit/<%= post._id %>" class="btn btn-primary text-white">Edit</a>
                                <a href="/posts/delete/<%= post._id %>" onclick="return confirm('Are you sure you want to delete?')" class="btn btn-danger text-white">Delete</a>
                            </div>
                        </div>
                    <% }); %>
                <% } else { %>
                    <p>No posts found!</p>
                <% } %>
            </div>
        </div>
    </main>
    <%- include('layouts/footer') -%>
    <%- include('layouts/script') -%>
    <script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>
</body>
</html>
